<?php
/**
 * @author Jonathan Page <jonpage.econ@gmail.com>
 */
require_once 'coalset.php';
session_start();
//if(isset($_POST['email'])){
//	$_SESSION['email'] = $_POST['email'];
//}
if(isset($_SESSION['powers'])){
//	session_start();
	
	require_once 'functions.php';

	/**
	 * Coalition initialization section
	 * $_SESSION['coals'] : contains sets of coalitions indexed by agent
	 * $_SESSION['coals_by_id'] : contains coalitions indexed by id
	 * $_SESSION['current_groups'] : contains the current groups
	 */
	if(isset($_SESSION['coals']) && isset($_SESSION['current_groups'])){
		// do nothing here, coalitions have already been calculated
		//var_dump($_SESSION['coals'][0]);
	} else {
		/**
		 * initiate coalitions
		 */
		$_SESSION['coals_by_id'] = create_coalitions($_SESSION['powers']);
		
		// For each agent create a sorted coalition (Coalset object)
		for ($j=0; $j < count($_SESSION['powers']); $j++) { 
			$coals_by_agent[$j]= new Coalset($_SESSION['coals_by_id'],$j);
			// initialize groups
			foreach ($_SESSION['coals_by_id'] as $value) {
				// grabs the coalition that is the singleton containing the current agent
				if(pow(2,$j)==bindec($value['id'])) {
					$_SESSION['current_groups'][] = $value;
				}
			}
		}
		//var_dump($coals_by_agent[$j-1]);
		$_SESSION['coals'] = $coals_by_agent;

		/**
		 * Config needs to be json including 'powers', 'coals', and 'coals_by_id'
		 */
		//echo json_encode(array('powers'=>$_SESSION['powers'],'coals'=>$_SESSION['coals'],'coals_by_id'=>$_SESSION['coals_by_id']));
		//var_dump($_SESSION['current_groups']);
		$config_json = json_encode(array('powers'=>$_SESSION['powers'],'coals'=>$_SESSION['coals'],'coals_by_id'=>$_SESSION['coals_by_id']));
		//$config_json = '{"powers":["0.17","0.17","0.17","0.17","0.17","0.15"],"coals":[{"coalitions":[{"id":"100000","agents":[0],"power":0.17,"proportions":[1],"score":32},{"id":"100001","agents":[0,5],"power":0.32,"proportions":{"0":0.53,"5":0.47},"score":31},{"id":"110000","agents":[0,1],"power":0.34,"proportions":[0.5,0.5],"score":30},{"id":"100100","agents":[0,3],"power":0.34,"proportions":{"0":0.5,"3":0.5},"score":29},{"id":"100010","agents":[0,4],"power":0.34,"proportions":{"0":0.5,"4":0.5},"score":28},{"id":"101000","agents":[0,2],"power":0.34,"proportions":{"0":0.5,"2":0.5},"score":27},{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31},"score":26},{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31},"score":25},{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31},"score":24},{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31},"score":23},{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33},"score":22},{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33},"score":21},{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33],"score":20},{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33},"score":19},{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33},"score":18},{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33},"score":17},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":16},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":15},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":14},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":10},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":3},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":0},{"coalitions":[{"id":"10000","agents":[1],"power":0.17,"proportions":{"1":1},"score":32},{"id":"10001","agents":[1,5],"power":0.32,"proportions":{"1":0.53,"5":0.47},"score":31},{"id":"110000","agents":[0,1],"power":0.34,"proportions":[0.5,0.5],"score":30},{"id":"10100","agents":[1,3],"power":0.34,"proportions":{"1":0.5,"3":0.5},"score":29},{"id":"10010","agents":[1,4],"power":0.34,"proportions":{"1":0.5,"4":0.5},"score":28},{"id":"11000","agents":[1,2],"power":0.34,"proportions":{"1":0.5,"2":0.5},"score":27},{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31},"score":26},{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31},"score":25},{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31},"score":24},{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31},"score":23},{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33},"score":22},{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33},"score":21},{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33],"score":20},{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33},"score":19},{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33},"score":18},{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33},"score":17},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":16},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":15},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":14},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":3},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":1},{"coalitions":[{"id":"1000","agents":[2],"power":0.17,"proportions":{"2":1},"score":32},{"id":"1001","agents":[2,5],"power":0.32,"proportions":{"2":0.53,"5":0.47},"score":31},{"id":"101000","agents":[0,2],"power":0.34,"proportions":{"0":0.5,"2":0.5},"score":30},{"id":"1100","agents":[2,3],"power":0.34,"proportions":{"2":0.5,"3":0.5},"score":29},{"id":"1010","agents":[2,4],"power":0.34,"proportions":{"2":0.5,"4":0.5},"score":28},{"id":"11000","agents":[1,2],"power":0.34,"proportions":{"1":0.5,"2":0.5},"score":27},{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31},"score":26},{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31},"score":25},{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31},"score":24},{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31},"score":23},{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33},"score":22},{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33},"score":21},{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33],"score":20},{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33},"score":19},{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33},"score":18},{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33},"score":17},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":16},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":15},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":14},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":2},{"coalitions":[{"id":"100","agents":[3],"power":0.17,"proportions":{"3":1},"score":32},{"id":"101","agents":[3,5],"power":0.32,"proportions":{"3":0.53,"5":0.47},"score":31},{"id":"100100","agents":[0,3],"power":0.34,"proportions":{"0":0.5,"3":0.5},"score":30},{"id":"1100","agents":[2,3],"power":0.34,"proportions":{"2":0.5,"3":0.5},"score":29},{"id":"110","agents":[3,4],"power":0.34,"proportions":{"3":0.5,"4":0.5},"score":28},{"id":"10100","agents":[1,3],"power":0.34,"proportions":{"1":0.5,"3":0.5},"score":27},{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31},"score":26},{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31},"score":25},{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31},"score":24},{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31},"score":23},{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33},"score":22},{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33},"score":21},{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33},"score":20},{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33},"score":19},{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33},"score":18},{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33},"score":17},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":16},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":15},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":14},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":12},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":3},{"coalitions":[{"id":"10","agents":[4],"power":0.17,"proportions":{"4":1},"score":32},{"id":"11","agents":[4,5],"power":0.32,"proportions":{"4":0.53,"5":0.47},"score":31},{"id":"100010","agents":[0,4],"power":0.34,"proportions":{"0":0.5,"4":0.5},"score":30},{"id":"1010","agents":[2,4],"power":0.34,"proportions":{"2":0.5,"4":0.5},"score":29},{"id":"110","agents":[3,4],"power":0.34,"proportions":{"3":0.5,"4":0.5},"score":28},{"id":"10010","agents":[1,4],"power":0.34,"proportions":{"1":0.5,"4":0.5},"score":27},{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31},"score":26},{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31},"score":25},{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31},"score":24},{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31},"score":23},{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33},"score":22},{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33},"score":21},{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33},"score":20},{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33},"score":19},{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33},"score":18},{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33},"score":17},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":16},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":15},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":14},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":13},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":12},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":8},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":4},{"coalitions":[{"id":"1","agents":[5],"power":0.15,"proportions":{"5":1},"score":32},{"id":"10001","agents":[1,5],"power":0.32,"proportions":{"1":0.53,"5":0.47},"score":31},{"id":"100001","agents":[0,5],"power":0.32,"proportions":{"0":0.53,"5":0.47},"score":30},{"id":"1001","agents":[2,5],"power":0.32,"proportions":{"2":0.53,"5":0.47},"score":29},{"id":"101","agents":[3,5],"power":0.32,"proportions":{"3":0.53,"5":0.47},"score":28},{"id":"11","agents":[4,5],"power":0.32,"proportions":{"4":0.53,"5":0.47},"score":27},{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31},"score":26},{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31},"score":25},{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31},"score":24},{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31},"score":23},{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31},"score":22},{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31},"score":21},{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31},"score":20},{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31},"score":19},{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31},"score":18},{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31},"score":17},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":16},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":15},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":14},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":13},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":10},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":9},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":8},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":7},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":6},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":5}],"coals_by_id":{"1":{"id":"1","agents":[5],"power":0.15,"proportions":{"5":1}},"10":{"id":"10","agents":[4],"power":0.17,"proportions":{"4":1}},"11":{"id":"11","agents":[4,5],"power":0.32,"proportions":{"4":0.53,"5":0.47}},"100":{"id":"100","agents":[3],"power":0.17,"proportions":{"3":1}},"101":{"id":"101","agents":[3,5],"power":0.32,"proportions":{"3":0.53,"5":0.47}},"110":{"id":"110","agents":[3,4],"power":0.34,"proportions":{"3":0.5,"4":0.5}},"111":{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31}},"1000":{"id":"1000","agents":[2],"power":0.17,"proportions":{"2":1}},"1001":{"id":"1001","agents":[2,5],"power":0.32,"proportions":{"2":0.53,"5":0.47}},"1010":{"id":"1010","agents":[2,4],"power":0.34,"proportions":{"2":0.5,"4":0.5}},"1011":{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31}},"1100":{"id":"1100","agents":[2,3],"power":0.34,"proportions":{"2":0.5,"3":0.5}},"1101":{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31}},"1110":{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33}},"1111":{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23}},"10000":{"id":"10000","agents":[1],"power":0.17,"proportions":{"1":1}},"10001":{"id":"10001","agents":[1,5],"power":0.32,"proportions":{"1":0.53,"5":0.47}},"10010":{"id":"10010","agents":[1,4],"power":0.34,"proportions":{"1":0.5,"4":0.5}},"10011":{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31}},"10100":{"id":"10100","agents":[1,3],"power":0.34,"proportions":{"1":0.5,"3":0.5}},"10101":{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31}},"10110":{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33}},"10111":{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23}},"11000":{"id":"11000","agents":[1,2],"power":0.34,"proportions":{"1":0.5,"2":0.5}},"11001":{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31}},"11010":{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33}},"11011":{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23}},"11100":{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33}},"11101":{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23}},"11110":{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25}},"11111":{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18}},"100000":{"id":"100000","agents":[0],"power":0.17,"proportions":[1]},"100001":{"id":"100001","agents":[0,5],"power":0.32,"proportions":{"0":0.53,"5":0.47}},"100010":{"id":"100010","agents":[0,4],"power":0.34,"proportions":{"0":0.5,"4":0.5}},"100011":{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31}},"100100":{"id":"100100","agents":[0,3],"power":0.34,"proportions":{"0":0.5,"3":0.5}},"100101":{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31}},"100110":{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33}},"100111":{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23}},"101000":{"id":"101000","agents":[0,2],"power":0.34,"proportions":{"0":0.5,"2":0.5}},"101001":{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31}},"101010":{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33}},"101011":{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23}},"101100":{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33}},"101101":{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23}},"101110":{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25}},"101111":{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18}},"110000":{"id":"110000","agents":[0,1],"power":0.34,"proportions":[0.5,0.5]},"110001":{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31}},"110010":{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33}},"110011":{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23}},"110100":{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33}},"110101":{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23}},"110110":{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25}},"110111":{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18}},"111000":{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33]},"111001":{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23}},"111010":{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25}},"111011":{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18}},"111100":{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25]},"111101":{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18}},"111110":{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2]},"111111":{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15]}}}';
		$config = json_decode($config_json,true);

		//echo "<strong>Coals_By_Id</strong><br/>";
		//echo json_encode($_SESSION['coals_by_id']);
		//echo "<br/><strong>Coals</strong><br/>";
		//echo json_encode($_SESSION['coals']);
		$coals_by_id_json = json_encode($_SESSION['coals_by_id']);
		//$coals_by_id_json = '{"1":{"id":"1","agents":[5],"power":0.15,"proportions":{"5":1}},"10":{"id":"10","agents":[4],"power":0.17,"proportions":{"4":1}},"11":{"id":"11","agents":[4,5],"power":0.32,"proportions":{"4":0.53,"5":0.47}},"100":{"id":"100","agents":[3],"power":0.17,"proportions":{"3":1}},"101":{"id":"101","agents":[3,5],"power":0.32,"proportions":{"3":0.53,"5":0.47}},"110":{"id":"110","agents":[3,4],"power":0.34,"proportions":{"3":0.5,"4":0.5}},"111":{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31}},"1000":{"id":"1000","agents":[2],"power":0.17,"proportions":{"2":1}},"1001":{"id":"1001","agents":[2,5],"power":0.32,"proportions":{"2":0.53,"5":0.47}},"1010":{"id":"1010","agents":[2,4],"power":0.34,"proportions":{"2":0.5,"4":0.5}},"1011":{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31}},"1100":{"id":"1100","agents":[2,3],"power":0.34,"proportions":{"2":0.5,"3":0.5}},"1101":{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31}},"1110":{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33}},"1111":{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23}},"10000":{"id":"10000","agents":[1],"power":0.17,"proportions":{"1":1}},"10001":{"id":"10001","agents":[1,5],"power":0.32,"proportions":{"1":0.53,"5":0.47}},"10010":{"id":"10010","agents":[1,4],"power":0.34,"proportions":{"1":0.5,"4":0.5}},"10011":{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31}},"10100":{"id":"10100","agents":[1,3],"power":0.34,"proportions":{"1":0.5,"3":0.5}},"10101":{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31}},"10110":{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33}},"10111":{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23}},"11000":{"id":"11000","agents":[1,2],"power":0.34,"proportions":{"1":0.5,"2":0.5}},"11001":{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31}},"11010":{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33}},"11011":{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23}},"11100":{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33}},"11101":{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23}},"11110":{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25}},"11111":{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18}},"100000":{"id":"100000","agents":[0],"power":0.17,"proportions":[1]},"100001":{"id":"100001","agents":[0,5],"power":0.32,"proportions":{"0":0.53,"5":0.47}},"100010":{"id":"100010","agents":[0,4],"power":0.34,"proportions":{"0":0.5,"4":0.5}},"100011":{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31}},"100100":{"id":"100100","agents":[0,3],"power":0.34,"proportions":{"0":0.5,"3":0.5}},"100101":{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31}},"100110":{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33}},"100111":{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23}},"101000":{"id":"101000","agents":[0,2],"power":0.34,"proportions":{"0":0.5,"2":0.5}},"101001":{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31}},"101010":{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33}},"101011":{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23}},"101100":{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33}},"101101":{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23}},"101110":{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25}},"101111":{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18}},"110000":{"id":"110000","agents":[0,1],"power":0.34,"proportions":[0.5,0.5]},"110001":{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31}},"110010":{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33}},"110011":{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23}},"110100":{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33}},"110101":{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23}},"110110":{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25}},"110111":{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18}},"111000":{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33]},"111001":{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23}},"111010":{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25}},"111011":{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18}},"111100":{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25]},"111101":{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18}},"111110":{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2]},"111111":{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15]}}';
		$coals_json = json_encode($_SESSION['coals']);
		//$coals_json = '[{"coalitions":[{"id":"100000","agents":[0],"power":0.17,"proportions":[1],"score":32},{"id":"100001","agents":[0,5],"power":0.32,"proportions":{"0":0.53,"5":0.47},"score":31},{"id":"110000","agents":[0,1],"power":0.34,"proportions":[0.5,0.5],"score":30},{"id":"100100","agents":[0,3],"power":0.34,"proportions":{"0":0.5,"3":0.5},"score":29},{"id":"100010","agents":[0,4],"power":0.34,"proportions":{"0":0.5,"4":0.5},"score":28},{"id":"101000","agents":[0,2],"power":0.34,"proportions":{"0":0.5,"2":0.5},"score":27},{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31},"score":26},{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31},"score":25},{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31},"score":24},{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31},"score":23},{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33},"score":22},{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33},"score":21},{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33],"score":20},{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33},"score":19},{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33},"score":18},{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33},"score":17},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":16},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":15},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":14},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":10},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":3},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":0},{"coalitions":[{"id":"10000","agents":[1],"power":0.17,"proportions":{"1":1},"score":32},{"id":"10001","agents":[1,5],"power":0.32,"proportions":{"1":0.53,"5":0.47},"score":31},{"id":"110000","agents":[0,1],"power":0.34,"proportions":[0.5,0.5],"score":30},{"id":"10100","agents":[1,3],"power":0.34,"proportions":{"1":0.5,"3":0.5},"score":29},{"id":"10010","agents":[1,4],"power":0.34,"proportions":{"1":0.5,"4":0.5},"score":28},{"id":"11000","agents":[1,2],"power":0.34,"proportions":{"1":0.5,"2":0.5},"score":27},{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31},"score":26},{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31},"score":25},{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31},"score":24},{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31},"score":23},{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33},"score":22},{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33},"score":21},{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33],"score":20},{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33},"score":19},{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33},"score":18},{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33},"score":17},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":16},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":15},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":14},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":3},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":1},{"coalitions":[{"id":"1000","agents":[2],"power":0.17,"proportions":{"2":1},"score":32},{"id":"1001","agents":[2,5],"power":0.32,"proportions":{"2":0.53,"5":0.47},"score":31},{"id":"101000","agents":[0,2],"power":0.34,"proportions":{"0":0.5,"2":0.5},"score":30},{"id":"1100","agents":[2,3],"power":0.34,"proportions":{"2":0.5,"3":0.5},"score":29},{"id":"1010","agents":[2,4],"power":0.34,"proportions":{"2":0.5,"4":0.5},"score":28},{"id":"11000","agents":[1,2],"power":0.34,"proportions":{"1":0.5,"2":0.5},"score":27},{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31},"score":26},{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31},"score":25},{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31},"score":24},{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31},"score":23},{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33},"score":22},{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33},"score":21},{"id":"111000","agents":[0,1,2],"power":0.51,"proportions":[0.33,0.33,0.33],"score":20},{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33},"score":19},{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33},"score":18},{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33},"score":17},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":16},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":15},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":14},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":2},{"coalitions":[{"id":"100","agents":[3],"power":0.17,"proportions":{"3":1},"score":32},{"id":"101","agents":[3,5],"power":0.32,"proportions":{"3":0.53,"5":0.47},"score":31},{"id":"100100","agents":[0,3],"power":0.34,"proportions":{"0":0.5,"3":0.5},"score":30},{"id":"1100","agents":[2,3],"power":0.34,"proportions":{"2":0.5,"3":0.5},"score":29},{"id":"110","agents":[3,4],"power":0.34,"proportions":{"3":0.5,"4":0.5},"score":28},{"id":"10100","agents":[1,3],"power":0.34,"proportions":{"1":0.5,"3":0.5},"score":27},{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31},"score":26},{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31},"score":25},{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31},"score":24},{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31},"score":23},{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33},"score":22},{"id":"101100","agents":[0,2,3],"power":0.51,"proportions":{"0":0.33,"2":0.33,"3":0.33},"score":21},{"id":"110100","agents":[0,1,3],"power":0.51,"proportions":{"0":0.33,"1":0.33,"3":0.33},"score":20},{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33},"score":19},{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33},"score":18},{"id":"11100","agents":[1,2,3],"power":0.51,"proportions":{"1":0.33,"2":0.33,"3":0.33},"score":17},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":16},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":15},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":14},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":13},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":12},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111100","agents":[0,1,2,3],"power":0.68,"proportions":[0.25,0.25,0.25,0.25],"score":8},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":3},{"coalitions":[{"id":"10","agents":[4],"power":0.17,"proportions":{"4":1},"score":32},{"id":"11","agents":[4,5],"power":0.32,"proportions":{"4":0.53,"5":0.47},"score":31},{"id":"100010","agents":[0,4],"power":0.34,"proportions":{"0":0.5,"4":0.5},"score":30},{"id":"1010","agents":[2,4],"power":0.34,"proportions":{"2":0.5,"4":0.5},"score":29},{"id":"110","agents":[3,4],"power":0.34,"proportions":{"3":0.5,"4":0.5},"score":28},{"id":"10010","agents":[1,4],"power":0.34,"proportions":{"1":0.5,"4":0.5},"score":27},{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31},"score":26},{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31},"score":25},{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31},"score":24},{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31},"score":23},{"id":"1110","agents":[2,3,4],"power":0.51,"proportions":{"2":0.33,"3":0.33,"4":0.33},"score":22},{"id":"101010","agents":[0,2,4],"power":0.51,"proportions":{"0":0.33,"2":0.33,"4":0.33},"score":21},{"id":"110010","agents":[0,1,4],"power":0.51,"proportions":{"0":0.33,"1":0.33,"4":0.33},"score":20},{"id":"100110","agents":[0,3,4],"power":0.51,"proportions":{"0":0.33,"3":0.33,"4":0.33},"score":19},{"id":"10110","agents":[1,3,4],"power":0.51,"proportions":{"1":0.33,"3":0.33,"4":0.33},"score":18},{"id":"11010","agents":[1,2,4],"power":0.51,"proportions":{"1":0.33,"2":0.33,"4":0.33},"score":17},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":16},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":15},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":14},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":13},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":12},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"110110","agents":[0,1,3,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"3":0.25,"4":0.25},"score":10},{"id":"11110","agents":[1,2,3,4],"power":0.68,"proportions":{"1":0.25,"2":0.25,"3":0.25,"4":0.25},"score":9},{"id":"111010","agents":[0,1,2,4],"power":0.68,"proportions":{"0":0.25,"1":0.25,"2":0.25,"4":0.25},"score":8},{"id":"101110","agents":[0,2,3,4],"power":0.68,"proportions":{"0":0.25,"2":0.25,"3":0.25,"4":0.25},"score":7},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":6},{"id":"111110","agents":[0,1,2,3,4],"power":0.85,"proportions":[0.2,0.2,0.2,0.2,0.2],"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":4},{"coalitions":[{"id":"1","agents":[5],"power":0.15,"proportions":{"5":1},"score":32},{"id":"10001","agents":[1,5],"power":0.32,"proportions":{"1":0.53,"5":0.47},"score":31},{"id":"100001","agents":[0,5],"power":0.32,"proportions":{"0":0.53,"5":0.47},"score":30},{"id":"1001","agents":[2,5],"power":0.32,"proportions":{"2":0.53,"5":0.47},"score":29},{"id":"101","agents":[3,5],"power":0.32,"proportions":{"3":0.53,"5":0.47},"score":28},{"id":"11","agents":[4,5],"power":0.32,"proportions":{"4":0.53,"5":0.47},"score":27},{"id":"110001","agents":[0,1,5],"power":0.49,"proportions":{"0":0.35,"1":0.35,"5":0.31},"score":26},{"id":"100101","agents":[0,3,5],"power":0.49,"proportions":{"0":0.35,"3":0.35,"5":0.31},"score":25},{"id":"100011","agents":[0,4,5],"power":0.49,"proportions":{"0":0.35,"4":0.35,"5":0.31},"score":24},{"id":"11001","agents":[1,2,5],"power":0.49,"proportions":{"1":0.35,"2":0.35,"5":0.31},"score":23},{"id":"10011","agents":[1,4,5],"power":0.49,"proportions":{"1":0.35,"4":0.35,"5":0.31},"score":22},{"id":"1101","agents":[2,3,5],"power":0.49,"proportions":{"2":0.35,"3":0.35,"5":0.31},"score":21},{"id":"111","agents":[3,4,5],"power":0.49,"proportions":{"3":0.35,"4":0.35,"5":0.31},"score":20},{"id":"101001","agents":[0,2,5],"power":0.49,"proportions":{"0":0.35,"2":0.35,"5":0.31},"score":19},{"id":"10101","agents":[1,3,5],"power":0.49,"proportions":{"1":0.35,"3":0.35,"5":0.31},"score":18},{"id":"1011","agents":[2,4,5],"power":0.49,"proportions":{"2":0.35,"4":0.35,"5":0.31},"score":17},{"id":"101011","agents":[0,2,4,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"4":0.26,"5":0.23},"score":16},{"id":"110101","agents":[0,1,3,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"3":0.26,"5":0.23},"score":15},{"id":"101101","agents":[0,2,3,5],"power":0.66,"proportions":{"0":0.26,"2":0.26,"3":0.26,"5":0.23},"score":14},{"id":"110011","agents":[0,1,4,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"4":0.26,"5":0.23},"score":13},{"id":"11011","agents":[1,2,4,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"4":0.26,"5":0.23},"score":12},{"id":"10111","agents":[1,3,4,5],"power":0.66,"proportions":{"1":0.26,"3":0.26,"4":0.26,"5":0.23},"score":11},{"id":"1111","agents":[2,3,4,5],"power":0.66,"proportions":{"2":0.26,"3":0.26,"4":0.26,"5":0.23},"score":10},{"id":"100111","agents":[0,3,4,5],"power":0.66,"proportions":{"0":0.26,"3":0.26,"4":0.26,"5":0.23},"score":9},{"id":"111001","agents":[0,1,2,5],"power":0.66,"proportions":{"0":0.26,"1":0.26,"2":0.26,"5":0.23},"score":8},{"id":"11101","agents":[1,2,3,5],"power":0.66,"proportions":{"1":0.26,"2":0.26,"3":0.26,"5":0.23},"score":7},{"id":"111011","agents":[0,1,2,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"4":0.2,"5":0.18},"score":6},{"id":"111101","agents":[0,1,2,3,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"2":0.2,"3":0.2,"5":0.18},"score":5},{"id":"11111","agents":[1,2,3,4,5],"power":0.83,"proportions":{"1":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":4},{"id":"110111","agents":[0,1,3,4,5],"power":0.83,"proportions":{"0":0.2,"1":0.2,"3":0.2,"4":0.2,"5":0.18},"score":3},{"id":"101111","agents":[0,2,3,4,5],"power":0.83,"proportions":{"0":0.2,"2":0.2,"3":0.2,"4":0.2,"5":0.18},"score":2},{"id":"111111","agents":[0,1,2,3,4,5],"power":1,"proportions":[0.17,0.17,0.17,0.17,0.17,0.15],"score":1}],"player":5}]';

		//echo "<strong>before</strong><br/>";
		//var_dump($_SESSION['coals_by_id']);

		//$_SESSION['coals_by_id'] = json_decode($coals_by_id_json,true);
		$_SESSION['coals_by_id'] = $config['coals_by_id'];

		//$coals_array = json_decode($coals_json,true);
		$coals_array = $config['coals'];
		//echo "<br/><strong>after</strong><br/>";
		foreach($coals_array as $key => $value){
			$obj = new Coalset();
			$obj2 = (object) $coals_array[$key];
			$obj->coalitions = $obj2->coalitions;
			$obj->player = $obj2->player;
			$_SESSION['coals'][$key] = $obj;
		}
		//var_dump($_SESSION['coals_by_id']);
	}

	/**
	 * Determine the stage type
	 */
	if($_SESSION['stage'] == 'propose'){
		/**
		 * Determine if it is the current player's turn
		 */
		$_SESSION['proposed_turn'] = $_SESSION['turn'];

		if($_SESSION['order'][$_SESSION['turn']] == $_SESSION['current_player']){
			/**
			 * Prompt user to vote
			 */
			//echo "look at your choices and vote";
			require_once 'user_propose.php';
		} else {
			/**
			 * Simulate AI agents
			 */
			if(isset($_SESSION['proposals'])){
				$_SESSION['coals'][$_SESSION['order'][$_SESSION['turn']]]->update($_SESSION['proposals']);
			}
			//echo "Test";
			// choose the top item on this agents ranked list of coalitions
			//echo $_SESSION['coals'][$_SESSION['turn']]->coalitions[0]['id'];
			//$_SESSION['proposals'][$_SESSION['order'][$_SESSION['turn']]] = $_SESSION['coals'][$_SESSION['order'][$_SESSION['turn']]]->coalitions[0];
			//$_SESSION['active_proposal'] = $_SESSION['coals'][$_SESSION['order'][$_SESSION['turn']]]->coalitions[0];
			//var_dump($_SESSION['proposals']);
			
			// create the new_groups variable
			
			$_SESSION['ai_groups_set'] = new_groups_set($_SESSION['current_groups'],$_SESSION['order'][$_SESSION['turn']]);
			$active_proposal_groups = ai_select_group($_SESSION['ai_groups_set'],$_SESSION['order'][$_SESSION['turn']]);
			$_SESSION['active_proposal_groups'] = $_SESSION['ai_groups_set'][$active_proposal_groups];

			foreach ($_SESSION['coals'][$_SESSION['order'][$_SESSION['turn']]]->coalitions as $value) {
				if($value['id']==$active_proposal_groups){
					$_SESSION['proposals'][$_SESSION['current_player']] = $value;
					$_SESSION['active_proposal'] = $value;
					//var_dump($_SESSION['active_proposal']);
				}
			}
			//$_SESSION['proposals'][$_SESSION['order'][$_SESSION['turn']]] = $_SESSION['active_proposal_groups'];
			//$_SESSION['active_proposal'] = $_SESSION['active_proposal_groups'];
			
			// move to next stage
			$_SESSION['stage'] = 'vote';

			//echo "AI voted";
			//reload experiment.php
			$host  = $_SERVER['HTTP_HOST'];
			$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
			$extra = 'experiment.php';

			header("Location: http://$host$uri/$extra");

		}
	} elseif($_SESSION['stage'] == 'vote') {

		$proposed_id = pretty_id($_SESSION['active_proposal']['id']);

		/**
		 * Collect AI Votes
		 */
		$_SESSION['votes'] = array();
		foreach ($_SESSION['order'] as $player_num) {
			// only do the following for the AI players
			if($player_num != $_SESSION['current_player']){
				// TODO: fix AI decision code
				// first see if AI player should be voting
				if(substr($proposed_id, -($_SESSION['num_agents']-$player_num),1)=="1"){
					if($_SESSION['coals'][$player_num]->coalitions[0]['id'] == $_SESSION['active_proposal']['id']){
						// vote for proposal
						$_SESSION['votes'][$player_num] = 1;
					} elseif($_SESSION['order'][$_SESSION['turn']] == $player_num) {
						$_SESSION['votes'][$player_num] = 1;
					} else {
						// still vote yes based on the vote threshold
						$vote_threshold = 3;
						if(rand(0,10)>=3){
							$_SESSION['votes'][$player_num] = 1;
						} else {
							$_SESSION['votes'][$player_num] = 0;
						}
						
					}
				} else {
					$_SESSION['votes'][$player_num] = 0;
				}
				
			}
		}

		/**
		 * Collect active user vote
		 */
		
		// see if user is in proposed coalition
		if(strlen($proposed_id)<6){
			$proposed_id = str_pad($proposed_id, 6, "0", STR_PAD_LEFT);
		}
		//var_dump(-($_SESSION['num_agents']-$_SESSION['current_player']));
		//var_dump($proposed_id);
		if(substr($proposed_id, -($_SESSION['num_agents']-$_SESSION['current_player']),1)=="1"){
			// see if the active user made the proposal
			if($_SESSION['order'][$_SESSION['turn']] == $_SESSION['current_player']){
				// set vote to yes (i.e. proposer should always vote yes)
				$_SESSION['votes'][$_SESSION['current_player']] = 1;
				$_SESSION['stage'] = 'results';
			} else {
				//echo "You are allowed to vote";
				require_once 'user_vote.php';
			}
		} else {
			$_SESSION['votes'][$_SESSION['current_player']] = 0;
			$_SESSION['stage'] = 'results';

			$host  = $_SERVER['HTTP_HOST'];
			$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
			$extra = 'experiment.php';

			header("Location: http://$host$uri/$extra");
		}
		

		//echo "AI Votes:<br\>";
		//var_dump($_SESSION['votes']);
		
		
	} 
	if ($_SESSION['stage'] == 'results') {
		/**
		 * Display results of voting
		 */
		//var_dump($_SESSION);
		require_once 'results.php';

	}

} else {

	// shouldn't be here, redirect to start page

	$host  = $_SERVER['HTTP_HOST'];
	$uri   = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
	$extra = 'index.php';

	header("Location: http://$host$uri/$extra");
}